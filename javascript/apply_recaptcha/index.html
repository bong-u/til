<!doctype html><html>
<head>
<title>Express&React í”„ë¡œì íŠ¸ì— Recaptcha v3 ì ìš©í•˜ê¸°</title>
<meta charset=utf-8>
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=description content="ìƒí™©  ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ &ldquo;ì•Œë¡&#34;ì„ ê°œë°œí•˜ë˜ ì¤‘, ì‚¬ìš©ìê°€ ì•…ì˜ì ì¸ ëª©ì ìœ¼ë¡œ ë°˜ë³µì ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì„ ì–´ë–»ê²Œ ë§‰ì„ê¹Œ ê³ ë¯¼í•˜ê²Œ ë˜ì—ˆë‹¤. â€¦">
<meta property="og:site_name" content="bong-u/til">
<meta property="og:title" content="Express&React í”„ë¡œì íŠ¸ì— Recaptcha v3 ì ìš©í•˜ê¸°">
<meta property="og:description" content="ìƒí™©  ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ &ldquo;ì•Œë¡&#34;ì„ ê°œë°œí•˜ë˜ ì¤‘, ì‚¬ìš©ìê°€ ì•…ì˜ì ì¸ ëª©ì ìœ¼ë¡œ ë°˜ë³µì ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì„ ì–´ë–»ê²Œ ë§‰ì„ê¹Œ ê³ ë¯¼í•˜ê²Œ ë˜ì—ˆë‹¤. â€¦">
<meta property="og:type" content="blog">
<meta property="og:url" content="https://github.com/bong-u/til-hugo">
<meta property="og:image" content="https://bong-u.github.io/til/asset/thumbnail.jpg">
<script type=text/javascript src=https://bong-u.github.io/til/script/base.js></script>
<link rel=icon href=https://bong-u.github.io/til/favicon16.png sizes=16x16>
<link rel=icon href=https://bong-u.github.io/til/favicon32.png sizes=32x32>
<link rel=icon href=https://bong-u.github.io/til/favicon48.png sizes=48x48>
<link rel=icon href=https://bong-u.github.io/til/favicon64.png sizes=64x64>
<link id=twCSS rel=stylesheet href=https://bong-u.github.io/til/css/style.css>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HE9FQR1ML7"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-HE9FQR1ML7')</script>
</head>
<body class=custom-scroll>
<div class="flex w-full flex-col items-center">
<script id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-svg.js></script>
<script>MathJax={tex:{inlineMath:[['$','$']]}}</script>
<script type=text/javascript src=https://bong-u.github.io/til/script/single.js></script>
<script type=text/javascript src=https://bong-u.github.io/til/script/toc.js></script>
<header class="flex justify-center p-3 w-full text-lg border-b border-line">
<div class="w-full flex justify-between lg-5/6">
<h3>
<a href=https://bong-u.github.io/til/ class=hover-black>
bong-u/til
</a>
</h3>
<div class="flex gap-5">
<a class=hover-black href=https://bong-u.github.io/til/>
ğŸ  home
</a>
<a class=hover-black href=https://github.com/bong-u/til>
ğŸˆ repository
</a>
</div>
</div>
</header>
<input type=checkbox id=toggleDarkMode onchange=toggleDarkModeHandler() hidden>
<main class="w-full lg:w-5/6 px-3 sm:px-12">
<aside class="fixed top-0 right-0 my-24 w-1/6 gap-3 px-9 hidden xl:flex text-sm overflow-hidden">
<nav id=TableOfContents>
<ul>
<li>
<ul>
<li><a href=#ìƒí™©>ìƒí™©</a></li>
<li><a href=#recaptchaë€>Recaptchaë€?</a></li>
<li><a href=#v3ì˜-ì‘ë™-ë°©ì‹>v3ì˜ ì‘ë™ ë°©ì‹</a></li>
<li><a href=#ì˜ˆìƒ-ì‹œë‚˜ë¦¬ì˜¤>ì˜ˆìƒ ì‹œë‚˜ë¦¬ì˜¤</a></li>
</ul>
</li>
<li><a href=#ì ìš©>ì ìš©</a>
<ul>
<li><a href=#ì‚¬ì „-ì„¤ì •>ì‚¬ì „ ì„¤ì •</a></li>
<li><a href=#server-express>Server (Express)</a></li>
<li><a href=#client-react>Client (React)</a></li>
</ul>
</li>
<li><a href=#ê²°ê³¼>ê²°ê³¼</a></li>
</ul>
</nav>
</aside>
<section class="my-16 xl:w-5/6">
<div class="mb-8 whitespace-nowrap">
<div class="flex justify-between items-baseline my-4 gap-8">
<h1 id=title class="overflow-ellipsis-bundle text-3xl font-bold p-1">
Express&React í”„ë¡œì íŠ¸ì— Recaptcha v3 ì ìš©í•˜ê¸°
</h1>
</div>
</div>
<div class="text-sm flex mb-8 justify-between text-textgray">
<div>
<span class="text-md mr-1">ğŸ·ï¸ typescript</span>
<span class="text-md mr-1">ğŸ·ï¸ security</span>
</div>
<h4 id=date>ìˆ˜ì •ì¼ : 2024-12-03</h4>
</div>
<hr class=opacity-30>
<article id=content class="bg-inherit markdown-body flex flex-col">
<h3 id=ìƒí™©>ìƒí™©</h3>
<ul>
<li>ì‚¬ì´ë“œ í”„ë¡œì íŠ¸ &ldquo;ì•Œë¡"ì„ ê°œë°œí•˜ë˜ ì¤‘, ì‚¬ìš©ìê°€ ì•…ì˜ì ì¸ ëª©ì ìœ¼ë¡œ ë°˜ë³µì ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚´ëŠ” ê²ƒì„ ì–´ë–»ê²Œ ë§‰ì„ê¹Œ ê³ ë¯¼í•˜ê²Œ ë˜ì—ˆë‹¤.</li>
<li>ì¡°ì‚¬ë¥¼ í†µí•´ Googleì—ì„œ ì œê³µë˜ëŠ” Recaptchaë¥¼ ì‚¬ìš©í•˜ë©´ ì†ì‰½ê²Œ ë°©ì§€í•  ìˆ˜ ìˆë‹¤ëŠ” ê²ƒì„ ì•Œê²Œ ë˜ì—ˆë‹¤.</li>
<li>ê³µê²©ìì˜ ì…ì¥ì—ì„œ ìƒê°í–ˆì„ ë•Œ, ì§€ê¸ˆ í”„ë¡œì íŠ¸ì—ì„œ ê°€ì¥ ì·¨ì•½í•œ ë¶€ë¶„ì€ íšŒì›ê°€ì…ì´ë¼ê³  ìƒê°í–ˆë‹¤.</li>
<li>íšŒì›ê°€ì…ì€ íšŒì›ì´ ì•„ë‹Œ ìê°€, ì•„ì´ë””ì™€ ë¹„ë°€ë²ˆí˜¸ ê·œì¹™ë§Œ ë§Œì¡±í•œë‹¤ë©´ ë°˜ë³µì ìœ¼ë¡œ ìš”ì²­ì„ ë³´ë‚¼ ìˆ˜ ìˆê³ , ì´ëŠ” DBì— ë°”ë¡œ ì €ì¥ë˜ê¸° ë•Œë¬¸ì´ë‹¤.</li>
<li>ë”°ë¼ì„œ <strong>íšŒì›ê°€ì… ë¶€ë¶„ì— Recaptchaë¥¼ ì ìš©</strong>í•˜ê¸°ë¡œ ê²°ì •í–ˆë‹¤.</li>
</ul>
<h3 id=recaptchaë€>Recaptchaë€?</h3>
<blockquote>
<p>RecaptchaëŠ” êµ¬ê¸€ì—ì„œ ì œê³µí•˜ëŠ” ë¬´ë£Œ ë³´ì•ˆ ì„œë¹„ìŠ¤ë¡œ, ì‚¬ìš©ìê°€ ë¡œë´‡ì´ ì•„ë‹˜ì„ ì¦ëª…í•˜ëŠ” ë°©ë²• ì¤‘ í•˜ë‚˜ì´ë‹¤.</p>
</blockquote>
<ul>
<li>ì§€ì› ì¢…ë£Œëœ v1ì„ ì œì™¸í•˜ë©´ v2, v3 ë‘ ê°€ì§€ ë²„ì „ì´ ìˆë‹¤.</li>
<li>v2ëŠ” ì‚¬ìš©ìê°€ &lsquo;ë‚˜ëŠ” ë¡œë´‡ì´ ì•„ë‹™ë‹ˆë‹¤&rsquo;ë¥¼ í´ë¦­í•˜ëŠ” ë°©ì‹ìœ¼ë¡œ ì¸ì¦ì´ ì™„ë£Œëœë‹¤.</li>
<li>v3ëŠ” <strong>ì‚¬ìš©ìì™€ ìƒí˜¸ì‘ìš© ì—†ì´ ìë™ìœ¼ë¡œ ì¸ì¦ì´ ì™„ë£Œ</strong>ëœë‹¤.</li>
<li>í•„ìëŠ” ì‚¬ìš©ìì˜ ê²½í—˜ê³¼ ì´ë¥¼ í…ŒìŠ¤íŠ¸í•  ë‚˜ì˜ ê³ ìƒì„ ëœê¸° ìœ„í•´ v3ë¥¼ ì‚¬ìš©í•˜ê¸°ë¡œ í–ˆë‹¤.</li>
</ul>
<h3 id=v3ì˜-ì‘ë™-ë°©ì‹>v3ì˜ ì‘ë™ ë°©ì‹</h3>
<ul>
<li>ì‚¬ìš©ìì˜ ë§ˆìš°ìŠ¤ í´ë¦­, í‚¤ë³´ë“œ ì…ë ¥, ìŠ¤í¬ë¡¤, ìš”ì²­ íŒ¨í„´ ë“±ì„ ë¶„ì„í•˜ì—¬ ì ìˆ˜ë¥¼ ë§¤ê¸´ë‹¤.</li>
<li>ì ìˆ˜ëŠ” 0.0 ~ 1.0 ì‚¬ì´ì˜ ê°’ìœ¼ë¡œ, 0.0ì€ ë¡œë´‡, 1.0ì€ ì‚¬ëŒì„ ì˜ë¯¸í•œë‹¤.</li>
<li>ê°œë°œìëŠ” Recaptchaê°€ í‰ê°€í•œ ì ìˆ˜ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ìš”ì²­ì„ ë°›ì•„ë“¤ì¼ì§€ ë§ì§€ ê²°ì •í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
<h3 id=ì˜ˆìƒ-ì‹œë‚˜ë¦¬ì˜¤>ì˜ˆìƒ ì‹œë‚˜ë¦¬ì˜¤</h3>
<ol>
<li>ì‚¬ìš©ìê°€ íšŒì›ê°€ì… í˜ì´ì§€ì— ì ‘ì†í•œë‹¤.</li>
<li>ë¸Œë¼ìš°ì €ë‹¨ì—ì„œ Recaptcha í‚¤ë¥¼ Recaptcha í† í°ì„ ë°›ì•„ì˜¨ë‹¤.</li>
<li>ì‚¬ìš©ìê°€ íšŒì›ê°€ì… ìš”ì²­ì„ ë³´ë‚¼ ë•Œ, Recaptcha í† í°ì„ í•¨ê»˜ ì „ë‹¬í•œë‹¤.</li>
<li>ì„œë²„ì—ì„œ Recaptcha í† í°ì„ ê²€ì¦í•˜ê³ , ì ìˆ˜ê°€ 0.5ë³´ë‹¤ ë‚®ìœ¼ë©´ ìš”ì²­ì„ ê±°ë¶€í•œë‹¤.</li>
</ol>
<h2 id=ì ìš©>ì ìš©</h2>
<h3 id=ì‚¬ì „-ì„¤ì •>ì‚¬ì „ ì„¤ì •</h3>
<ul>
<li><a href=https://www.google.com/recaptcha/>https://www.google.com/recaptcha/</a>ì— ì ‘ì†í•˜ì—¬ ë„ë©”ì¸ì„ ë“±ë¡í•˜ê³  í‚¤ë¥¼ ë°›ëŠ”ë‹¤.</li>
<li>ìì„¸í•œ ê³¼ì •ì€ ë‹¤ë¥¸ ë¸”ë¡œê·¸ì—ë„ ì˜ ì„¤ëª…ë˜ì–´ ìˆì–´ì„œ ìƒëµí•œë‹¤.</li>
</ul>
<h3 id=server-express>Server (Express)</h3>
<h4 id=user-servicets>user-service.ts</h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#75715e>// ì„œë¹„ìŠ¤ ë ˆì´ì–´ì— ì¶”ê°€í•œ Recaptcha ê²€ì¦ í•¨ìˆ˜
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#75715e></span><span style=color:#66d9ef>static</span> <span style=color:#66d9ef>async</span> <span style=color:#a6e22e>verifyRecaptcha</span>(<span style=color:#a6e22e>token</span>: <span style=color:#66d9ef>string</span>)<span style=color:#f92672>:</span> <span style=color:#a6e22e>Promise</span>&lt;<span style=color:#f92672>void</span>&gt; {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>    <span style=color:#75715e>// Recaptcha ê²€ì¦
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>fetch</span>(
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>        <span style=color:#75715e>// í‚¤ëŠ” Recaptcha ì‚¬ì´íŠ¸ì—ì„œ ë°›ì€ ê²ƒì´ë©°, í™˜ê²½ ë³€ìˆ˜ë¡œ ê´€ë¦¬
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span><span style=color:#75715e></span>        <span style=color:#e6db74>`https://www.google.com/recaptcha/api/siteverify?secret=</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>RECAPTCHA_SECRET_KEY</span><span style=color:#e6db74>}</span><span style=color:#e6db74>&amp;response=</span><span style=color:#e6db74>${</span><span style=color:#a6e22e>token</span><span style=color:#e6db74>}</span><span style=color:#e6db74>`</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>        {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>            <span style=color:#a6e22e>method</span><span style=color:#f92672>:</span> <span style=color:#e6db74>&#34;POST&#34;</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>        }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>    );
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>    <span style=color:#75715e>// ê²°ê³¼ë¥¼ JSONìœ¼ë¡œ íŒŒì‹±
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span><span style=color:#75715e></span>    <span style=color:#66d9ef>const</span> <span style=color:#a6e22e>verificationReuslt</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>response</span>.<span style=color:#a6e22e>json</span>();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>    <span style=color:#75715e>// ì ìˆ˜ê°€ 0.5ë³´ë‹¤ ë‚®ìœ¼ë©´ ì˜ˆì™¸ë¥¼ ë˜ì§
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>verificationReuslt</span>.<span style=color:#a6e22e>score</span> <span style=color:#f92672>&lt;=</span> <span style=color:#ae81ff>0.5</span>) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>        <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>RecaptchaScoreTooLowError</span>();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>    <span style=color:#75715e>// ì„±ê³µ ì—¬ë¶€ê°€ falseì´ë©´ ì˜ˆì™¸ë¥¼ ë˜ì§ (í† í°ì´ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš°)
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>verificationReuslt</span>.<span style=color:#a6e22e>success</span>) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>        <span style=color:#66d9ef>throw</span> <span style=color:#66d9ef>new</span> <span style=color:#a6e22e>RecaptchaTokenInvalidError</span>();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>}
</code></pre></div><h4 id=user-routerts>user-router.ts</h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-ts data-lang=ts><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#75715e>// ì»¨íŠ¸ë¡¤ëŸ¬ ë¶€ë¶„ì—ì„œ ë¶€ë¶„ì—ì„œ Recaptcha ê²€ì¦ í•¨ìˆ˜ë¥¼ í˜¸ì¶œ, ë°œìƒì‹œí‚¨ ì˜ˆì™¸ë¥¼ ì²˜ë¦¬
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span><span style=color:#75715e></span><span style=color:#66d9ef>try</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>UserService</span>.<span style=color:#a6e22e>verifyRecaptcha</span>(<span style=color:#a6e22e>recaptchaToken</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>UserService</span>.<span style=color:#a6e22e>createUser</span>(<span style=color:#a6e22e>username</span>, <span style=color:#a6e22e>password</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span>    <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>201</span>).<span style=color:#a6e22e>send</span>(<span style=color:#e6db74>&#34;User created successfully&#34;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>} <span style=color:#66d9ef>catch</span> (<span style=color:#a6e22e>err</span>: <span style=color:#66d9ef>any</span>) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>    <span style=color:#75715e>// Recaptcha ì ìˆ˜ê°€ ë‚®ì€ ê²½ìš° -&gt; 403 Forbidden
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span><span style=color:#75715e></span>    <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>RecaptchaScoreTooLowError</span>) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>        <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>403</span>).<span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>message</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>    <span style=color:#75715e>// Recaptcha í† í°ì´ ìœ íš¨í•˜ì§€ ì•Šì€ ê²½ìš° -&gt; 400 Bad Request
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span><span style=color:#75715e></span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>RecaptchaTokenInvalidError</span>) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>        <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>400</span>).<span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>message</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>    } <span style=color:#66d9ef>else</span> <span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>err</span> <span style=color:#66d9ef>instanceof</span> <span style=color:#a6e22e>UserAlreadyExistsError</span>) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span>        <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>409</span>).<span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>message</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>    } <span style=color:#66d9ef>else</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>        <span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>error</span>(<span style=color:#a6e22e>err</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>        <span style=color:#a6e22e>res</span>.<span style=color:#a6e22e>status</span>(<span style=color:#ae81ff>500</span>).<span style=color:#a6e22e>send</span>(<span style=color:#a6e22e>err</span>.<span style=color:#a6e22e>message</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>    }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>}
</code></pre></div><h3 id=client-react>Client (React)</h3>
<h4 id=apptsx>App.tsx</h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>GoogleReCaptchaProvider</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react-google-recaptcha-v3&#34;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#66d9ef>return</span> (
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    <span style=color:#75715e>// ìµœìƒìœ„ ì»´í¬ë„ŒíŠ¸ì— GoogleReCaptchaProviderë¥¼ ì‚¬ìš©í•˜ì—¬ Recaptcha í‚¤ë¥¼ ì „ë‹¬
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span style=color:#75715e></span>    &lt;<span style=color:#f92672>GoogleReCaptchaProvider</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>        <span style=color:#a6e22e>reCaptchaKey</span><span style=color:#f92672>=</span>{<span style=color:#a6e22e>process</span>.<span style=color:#a6e22e>env</span>.<span style=color:#a6e22e>REACT_APP_RECAPTCHA_SITE_KEY</span> <span style=color:#f92672>||</span> <span style=color:#e6db74>&#34;&#34;</span>}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>    &gt;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>        &lt;<span style=color:#f92672>Router</span>&gt;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span>            {<span style=color:#75715e>/* ... */</span>}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>        &lt;/<span style=color:#f92672>Router</span>&gt;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>    &lt;/<span style=color:#f92672>GoogleReCaptchaProvider</span>&gt;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>);
</code></pre></div><h4 id=signuppagetsx>SignupPage.tsx</h4>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-tsx data-lang=tsx><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 1</span><span style=color:#66d9ef>import</span> { <span style=color:#a6e22e>useGoogleReCaptcha</span> } <span style=color:#66d9ef>from</span> <span style=color:#e6db74>&#34;react-google-recaptcha-v3&#34;</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 2</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 3</span><span style=color:#66d9ef>const</span> <span style=color:#a6e22e>SignupPage</span>: <span style=color:#66d9ef>React.FC</span> <span style=color:#f92672>=</span> () <span style=color:#f92672>=&gt;</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 4</span>    <span style=color:#75715e>// useGoogleReCaptcha í›…ì„ ì‚¬ìš©í•˜ì—¬ Recaptcha í† í°ì„ ë°›ì•„ì˜´
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 5</span><span style=color:#75715e></span>	<span style=color:#66d9ef>const</span> { <span style=color:#a6e22e>executeRecaptcha</span> } <span style=color:#f92672>=</span> <span style=color:#a6e22e>useGoogleReCaptcha</span>();
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 6</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 7</span>	<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>handleSignup</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>async</span> () <span style=color:#f92672>=&gt;</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 8</span>        <span style=color:#75715e>// Recaptcha í† í°ì„ ë°›ì•„ì˜¤ê¸°ë„ ì „ì— ì‚¬ìš©ìê°€ íšŒì›ê°€ì…ì„ ì‹œë„í•˜ëŠ” ê²½ìš°
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f"> 9</span><span style=color:#75715e></span>		<span style=color:#66d9ef>if</span> (<span style=color:#f92672>!</span><span style=color:#a6e22e>executeRecaptcha</span>) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">10</span>			<span style=color:#a6e22e>console</span>.<span style=color:#a6e22e>log</span>(<span style=color:#e6db74>&#34;Execute recaptcha not yet available&#34;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">11</span>			<span style=color:#66d9ef>return</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">12</span>		}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">13</span>        <span style=color:#75715e>// Recaptcha í† í°ì„ ë°›ì•„ì˜´ (signupì€ actionì„ êµ¬ë¶„í•˜ê¸° ìœ„í•œ ë¬¸ìì—´)
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">14</span><span style=color:#75715e></span>		<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>recaptchaToken</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>executeRecaptcha</span>(<span style=color:#e6db74>&#34;signup&#34;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">15</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">16</span>		<span style=color:#66d9ef>if</span> (<span style=color:#a6e22e>password</span> <span style=color:#f92672>!==</span> <span style=color:#a6e22e>confirmPassword</span>) {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">17</span>			<span style=color:#a6e22e>alert</span>(<span style=color:#e6db74>&#34;ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.&#34;</span>);
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">18</span>			<span style=color:#66d9ef>return</span>;
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">19</span>		}
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">20</span>
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">21</span>		<span style=color:#66d9ef>try</span> {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">22</span>			<span style=color:#66d9ef>const</span> <span style=color:#a6e22e>response</span> <span style=color:#f92672>=</span> <span style=color:#66d9ef>await</span> <span style=color:#a6e22e>api</span>.<span style=color:#a6e22e>post</span>&lt;<span style=color:#f92672>SignupResponse</span>&gt;(<span style=color:#e6db74>&#34;/users/signup&#34;</span>, {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">23</span>				<span style=color:#a6e22e>username</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">24</span>				<span style=color:#a6e22e>password</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">25</span>                <span style=color:#75715e>// ì„œë²„ë¡œ Recaptcha í† í°ì„ ì „ë‹¬
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">26</span><span style=color:#75715e></span>				<span style=color:#a6e22e>recaptchaToken</span>,
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">27</span>			});
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">28</span>        } <span style=color:#66d9ef>catch</span>() {
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">29</span>            <span style=color:#75715e>// ...
</span><span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">30</span><span style=color:#75715e></span>        }
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">31</span>    };
<span style="margin-right:.4em;padding:0 .4em;color:#7f7f7f">32</span>};
</code></pre></div><h2 id=ê²°ê³¼>ê²°ê³¼</h2>
<p><img src=/static/image/recaptcha_result.png alt=recaptcha_result></p>
<ul>
<li>ê´€ë¦¬ì ì½˜ì†”ì„ í†µí•´ Recaptchaë¥¼ í†µí•´ ê²€ì¦ëœ ìš”ì²­ì„ í™•ì¸í•  ìˆ˜ ìˆë‹¤.</li>
</ul>
</article>
<div id=meta class=my-16>
<div>
<div class="flex justify-between w-full text-lg">
<a class="previous mr-5 overflow-ellipsis-bundle hover-bold" href=/til/javascript/react_interview/>
<span class=mx-3>â—€</span>
í”„ë¡ íŠ¸ì—”ë“œ(react) ë©´ì ‘ ì¤€ë¹„
</a>
</div>
</div>
</div>
<div id=comment-box></div>
</section>
</main>
</div>
</body>
</html>