<!doctype html><html>
<head>
<title> bong-u's TIL </title>
<meta charset=utf-8>
<script type=text/javascript src=https://bong-u.github.io/til-hugo/src/script.js></script>
<link rel=icon href=https://bong-u.github.io/til-hugo/favicon16.png sizes=16x16>
<link rel=icon href=https://bong-u.github.io/til-hugo/favicon32.png sizes=32x32>
<link id=twCSS rel=stylesheet href=https://bong-u.github.io/til-hugo/src/style.css>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS_HTML"></script>
<script type=text/x-mathjax-config>
  MathJax.Hub.Config({
    tex2jax: {inlineMath: [['$','$']], displayMath: [['$$','$$']]},
  });
</script>
<script async src="https://www.googletagmanager.com/gtag/js?id=G-HE9FQR1ML7"></script>
<script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag('js',new Date),gtag('config','G-HE9FQR1ML7')</script>
</head>
<body>
<header class="w-full text-center pt-3 py-9">
<input type=checkbox id=toggleDarkMode onchange=toggleDarkModeHandler() hidden>
<label class="absolute right-0 my-2 mx-4 text-2xl cursor-pointer" for=toggleDarkMode>
<span id=toggleButton>☀️</span>
</label>
<h1 class="text-4xl font-bold">
<a href=https://bong-u.github.io/til-hugo/>Bong-u's TIL</a>
</h1>
<img src=https://bong-u.github.io/til-hugo/asset\profile.jpg alt=profile class="rounded-full w-64 h-64 mx-auto my-4">
</header>
<script>let anchorsCache=null;document.addEventListener("DOMContentLoaded",()=>{window.addEventListener("scroll",()=>{const c=document.getElementById("TableOfContents"),b=document.querySelectorAll("#TableOfContents a"),a=getCurrentAnchor();let d=0;for(let c=0;c<b.length;c++)b[c].classList.remove("current"),b[c]===a&&(d=c);a&&a.classList.add("current"),c.scroll(0,a.offsetTop-c.offsetHeight/2)})});const getTocItem=a=>document.querySelector('[href="'+a+'"]'),getCurrentAnchor=()=>{const c=window.pageYOffset,a=getAnchors();let b=null;for(let d=0;d<a.length;d++){const e=getHeading(a[d]).getBoundingClientRect().top+c;if(e<c+window.innerHeight*.23)b=a[d];else break}return b||(b=a[0]),getTocItem(b)},getAnchors=()=>(anchorsCache||(anchorsCache=Array.from(document.querySelectorAll("#TableOfContents a")).map(a=>a.getAttribute("href"))),anchorsCache),getHeading=a=>document.getElementById(a.substr(1))</script>
<aside class="fixed right-0 w-56 gap-3 mx-9 hidden lg:flex">
<nav id=TableOfContents>
<ul>
<li><a href=#request-mapping>Request Mapping</a>
<ul>
<li><a href=#access-request-parameter--httpservletrequest>Access request parameter : HttpServletRequest</a></li>
<li><a href=#access-request-parameter--requestparam-annotation>Access request parameter : RequestParam Annotation</a></li>
</ul>
</li>
<li><a href=#redirect>Redirect</a></li>
<li><a href=#command-object>Command Object</a>
<ul>
<li><a href=#use-request-parameter-as-command-object>Use request parameter as command object</a></li>
<li><a href=#unsatisfieddependencyexception-error-creating-bean-with-name-controllerconfig-unsatisfied-dependency-expressed-through-field-memberregsvc-nested-exception-is-orgspringframeworkbeansfactorynosuchbeandefinitionexception-no-qualifying-bean-of-type-springmemberregisterservice-available-expected-at-least-1-bean-which-qualifies-as-autowire-candidate-dependency-annotations-orgspringframeworkbeansfactoryannotationautowiredrequiredtrue>UnsatisfiedDependencyException: Error creating bean with name &lsquo;controllerConfig&rsquo;: Unsatisfied dependency expressed through field &lsquo;memberRegSvc&rsquo;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &lsquo;spring.MemberRegisterService&rsquo; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}</a></li>
<li><a href=#custom-tag--form>Custom Tag : Form</a></li>
<li><a href=#jsp로-for문-사용하기>jsp로 for문 사용하기</a></li>
<li><a href=#jsp로-데이터-보내기>jsp로 데이터 보내기</a></li>
<li><a href=#modelandview-활용>ModelAndView 활용</a></li>
</ul>
</li>
</ul>
</nav>
</aside>
<main class="flex w-full justify-center">
<section class="px-4 w-11/12 lg:w-1/2 xl:w-7/12">
<div class=mb-10>
<div class="flex justify-between items-baseline my-4 whitespace-nowrap gap-8">
<h1 id=title class="overflow-hidden overflow-ellipsis text-3xl font-bold">MVC 1 : Request Mapping, Command Object, Redirect, Form Tag, Model</h1>
<div class="flex flex-col items-end">
<h4 id=date> CREATED 2023-01-17 </h4>
<h4 id=date> MODIFIED 2023-02-05</h4>
</div>
</div>
</div>
<article id=content class="bg-inherit markdown-body flex flex-col">
<h2 id=request-mapping>Request Mapping</h2>
<ul>
<li>GetMapping/PostMapping으로 처리할 method를 지정하거나 RequestMapping을 사용할 수 있다.</li>
</ul>
<h3 id=access-request-parameter--httpservletrequest>Access request parameter : HttpServletRequest</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@PostMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/register/step2&#34;</span><span style=color:#f92672>)</span>
<span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>handleStep2</span><span style=color:#f92672>(</span>HttpServletRequest request<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    String agreeParam <span style=color:#f92672>=</span> request<span style=color:#f92672>.</span><span style=color:#a6e22e>getParameter</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;agree&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(</span>agreeParam <span style=color:#f92672>==</span> <span style=color:#66d9ef>null</span> <span style=color:#f92672>||</span> <span style=color:#f92672>!</span>agreeParam<span style=color:#f92672>.</span><span style=color:#a6e22e>equals</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;true&#34;</span><span style=color:#f92672>))</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;register/step1&#34;</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;register/step2&#34;</span><span style=color:#f92672>;</span>
</code></pre></div><h3 id=access-request-parameter--requestparam-annotation>Access request parameter : RequestParam Annotation</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@PostMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/register/step2&#34;</span><span style=color:#f92672>)</span>
<span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>handleStep2</span><span style=color:#f92672>(</span>
<span style=color:#a6e22e>@RequestParam</span><span style=color:#f92672>(</span>value<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;agree&#34;</span><span style=color:#f92672>,</span> defaultValue<span style=color:#f92672>=</span><span style=color:#e6db74>&#34;false&#34;</span><span style=color:#f92672>)</span> Boolean agree<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>if</span> <span style=color:#f92672>(!</span>agree<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
        <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;register/step1&#34;</span><span style=color:#f92672>;</span>
    <span style=color:#f92672>}</span>
    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;register/step2&#34;</span><span style=color:#f92672>;</span>
</code></pre></div><h2 id=redirect>Redirect</h2>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@GetMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/register/step2&#34;</span><span style=color:#f92672>)</span>
<span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>handleStep2Get</span><span style=color:#f92672>()</span> <span style=color:#f92672>{</span>
    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;redirect:/register/step1&#34;</span><span style=color:#f92672>;</span>
</code></pre></div><h2 id=command-object>Command Object</h2>
<h3 id=use-request-parameter-as-command-object>Use request parameter as command object</h3>
<ul>
<li>RegisterController.java
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@PostMapping</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;/register/step3&#34;</span><span style=color:#f92672>)</span>
<span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>handleStep3</span><span style=color:#f92672>(</span>RegisterRequest regReq<span style=color:#f92672>)</span> <span style=color:#f92672>{...}</span>
</code></pre></div></li>
<li>step3.jsp
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#f92672>p</span>&gt;&lt;<span style=color:#f92672>strong</span>&gt;${registerRequest.name}님&lt;/<span style=color:#f92672>strong</span>&gt;&lt;/<span style=color:#f92672>p</span>&gt;
</code></pre></div></li>
</ul>
<h3 id=unsatisfieddependencyexception-error-creating-bean-with-name-controllerconfig-unsatisfied-dependency-expressed-through-field-memberregsvc-nested-exception-is-orgspringframeworkbeansfactorynosuchbeandefinitionexception-no-qualifying-bean-of-type-springmemberregisterservice-available-expected-at-least-1-bean-which-qualifies-as-autowire-candidate-dependency-annotations-orgspringframeworkbeansfactoryannotationautowiredrequiredtrue>UnsatisfiedDependencyException: Error creating bean with name &lsquo;controllerConfig&rsquo;: Unsatisfied dependency expressed through field &lsquo;memberRegSvc&rsquo;; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type &lsquo;spring.MemberRegisterService&rsquo; available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}</h3>
<ul>
<li>web.xml</li>
</ul>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-xml data-lang=xml><span style=color:#f92672>&lt;param-value&gt;</span>
    config.MvcConfig

    <span style=color:#75715e>&lt;!-- new!! --&gt;</span>
    config.MemberConfig

    config.ControllerConfig
<span style=color:#f92672>&lt;/param-value&gt;</span>
</code></pre></div><ul>
<li>web.xml에 MemberConfig 클래스가 빠져있어서 bean이 만들어지지 않아 발생한 오류이다</li>
</ul>
<h3 id=custom-tag--form>Custom Tag : Form</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#960050;background-color:#1e0010>&lt;</span>%@ taglib prefix=&#34;form&#34; uri=&#34;http://www.springframework.org/tags/form&#34; %&gt;
<span style=color:#75715e>&lt;!-- ... --&gt;</span>
&lt;<span style=color:#f92672>form:form</span> <span style=color:#a6e22e>action</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;step3&#34;</span> <span style=color:#a6e22e>modelAttribute</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;registerRequest&#34;</span>&gt;
  <span style=color:#75715e>&lt;!-- ... --&gt;</span>
  &lt;<span style=color:#f92672>form:input</span> <span style=color:#a6e22e>path</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;email&#34;</span>
/&gt;&lt;/<span style=color:#f92672>form:form</span>&gt;
</code></pre></div><ul>
<li>Spring MVC에서 지원하는 Custom Tag를 이용해 Command 객체와 간단하게 연동할 수 있다.</li>
</ul>
<h3 id=jsp로-for문-사용하기>jsp로 for문 사용하기</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html><span style=color:#960050;background-color:#1e0010>&lt;</span>%@ taglib prefix=&#34;c&#34; uri=&#34;http://java.sun.com/jsp/jstl/core&#34; %&gt;
<span style=color:#75715e>&lt;!-- ... --&gt;</span>
&lt;<span style=color:#f92672>c:forEach</span> <span style=color:#a6e22e>var</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;response&#34;</span> <span style=color:#a6e22e>items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;${ansData.responses}&#34;</span> <span style=color:#a6e22e>varStatus</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;status&#34;</span>&gt;
  &lt;<span style=color:#f92672>li</span>&gt;${status.index + 1}번 문항: ${response}&lt;/<span style=color:#f92672>li</span>&gt;
&lt;/<span style=color:#f92672>c:forEach</span>&gt;
</code></pre></div><h3 id=jsp로-데이터-보내기>jsp로 데이터 보내기</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@GetMapping</span>
<span style=color:#66d9ef>public</span> String <span style=color:#a6e22e>form</span><span style=color:#f92672>(</span>Model model<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    List<span style=color:#f92672>&lt;</span>Question<span style=color:#f92672>&gt;</span> questions <span style=color:#f92672>=</span> createQuestions<span style=color:#f92672>();</span>
    model<span style=color:#f92672>.</span><span style=color:#a6e22e>addAttribute</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;questions&#34;</span><span style=color:#f92672>,</span> questions<span style=color:#f92672>);</span>
    <span style=color:#66d9ef>return</span> <span style=color:#e6db74>&#34;survey/surveyForm&#34;</span><span style=color:#f92672>;</span>
<span style=color:#f92672>}</span>
</code></pre></div><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-html data-lang=html>&lt;<span style=color:#f92672>c:forEach</span> <span style=color:#a6e22e>var</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;q&#34;</span> <span style=color:#a6e22e>items</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;${questions}&#34;</span> <span style=color:#a6e22e>varStatus</span><span style=color:#f92672>=</span><span style=color:#e6db74>&#34;status&#34;</span>&gt;&lt;/<span style=color:#f92672>c:forEach</span>&gt;
</code></pre></div><h3 id=modelandview-활용>ModelAndView 활용</h3>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-java data-lang=java><span style=color:#a6e22e>@GetMapping</span>
<span style=color:#66d9ef>public</span> ModelAndView <span style=color:#a6e22e>form</span><span style=color:#f92672>(</span>Model model<span style=color:#f92672>)</span> <span style=color:#f92672>{</span>
    List<span style=color:#f92672>&lt;</span>Question<span style=color:#f92672>&gt;</span> questions <span style=color:#f92672>=</span> createQuestions<span style=color:#f92672>();</span>
    ModelAndView mav <span style=color:#f92672>=</span> <span style=color:#66d9ef>new</span> ModelAndView<span style=color:#f92672>();</span>
    mav<span style=color:#f92672>.</span><span style=color:#a6e22e>addObject</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;questions&#34;</span><span style=color:#f92672>,</span> questions<span style=color:#f92672>);</span>
    mav<span style=color:#f92672>.</span><span style=color:#a6e22e>setViewName</span><span style=color:#f92672>(</span><span style=color:#e6db74>&#34;survey/surveyForm&#34;</span><span style=color:#f92672>);</span>
    <span style=color:#66d9ef>return</span> mav<span style=color:#f92672>;</span>
<span style=color:#f92672>}</span>
</code></pre></div><ul>
<li>데이터 설정, 뷰이름 리턴 두가지를 한번에 처리할 수 있다</li>
</ul>
</article>
<div id=meta class=py-10>
<div>
<div class="flex justify-between w-full whitespace-nowrap">
<a class="previous mr-5 overflow-hidden overflow-ellipsis" href=/til-hugo/spring/08_connect_db/>
08_connect_DB</a>
<a class="next ml-5 overflow-hidden overflow-ellipsis" href=/til-hugo/spring/12_mvc_2/> MVC 2 : Messages, Validate command object</a>
</div>
</div>
</div>
</section>
</main>
</body>
</html>